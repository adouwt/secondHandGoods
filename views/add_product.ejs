<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>发布宝贝</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/css/custom-styles.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
    <link rel="stylesheet" href="/css/fileinput.css">
  </head>
  <body>
    <% include header.ejs%>
    <section>
        <%include left_colum.ejs%>
        <div class="right_board">
          <header>
            <h1>
              发布我的宝贝
            </h1>
          </header>
          <section>
              <div class="container">
                <div class="add_product_details">
                  <form  enctype="multipart/form-data" method="post">
                    <div class="row">
                      <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                        <div class="">
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-addon1">宝贝类别</span>
                            <input type="text" class="form-control" id = "user-goods-sort" placeholder="Username" aria-describedby="basic-addon1">
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-addon2">宝贝名称</span>
                            <input type="text" class="form-control" id = "user-goods-name" placeholder="Username" aria-describedby="basic-addon2">
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-addon3">宝贝用时</span>
                            <input type="text" class="form-control" id = "user-goods-usetime" placeholder="Username" aria-describedby="basic-addon3">
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-price">宝贝原价</span>
                            <input type="text" class="form-control" id = "user-goods-price" placeholder="Username" aria-describedby="basic-price">
                          </div>
                          <br>
                          <div class="form-group">
                            <div id="uploadForm"  method="post" enctype="multipart/form-data">
                              <div class="upload_box">
                                  <div class="upload_main">
                                    <div class="upload_choose">
                                      <input id="fileImage" type="file" size="30" name="fileselect" multiple />
                                      <span id="fileDragArea" class="upload_drag_area">或者将图片拖到此处</span>
                                    </div>
                                    <div id="preview" class="upload_preview"></div>
                                  </div>
                                  <div class="upload_submit">
                                    <button type="button" id="fileSubmit" class="upload_submit_btn">确认上传图片</button>
                                  </div>
                                  <div id="uploadInf" class="upload_inf"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-change">想换</span>
                            <input type="text" class="form-control" id = "user-change-target" placeholder="Username" aria-describedby="basic-change">
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-username">姓名</span>
                            <input type="text" class="form-control" id = "user-name" placeholder="Username" aria-describedby="basic-username">
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon" id="basic-tel">电话</span>
                            <input type="text" class="form-control" id = "user-phone" placeholder="Username" aria-describedby="basic-tel">
                          </div>
                          <br>
                      </div>
                      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                          <div class="form-group">
                            <label for="message-text" class="control-label">补充:</label>
                            <textarea class="form-control" id="user-goods-addText"></textarea>
                          </div>
                          <br>
                          <button type="submit" class="btn btn-default" id ="goods-submit">Submit</button>

                      </div>
                    </div>
                  </form>
                </div>
              </div>
          </section>
          <hr>          
          <h4 class="text-center">你将要发布的东西，会在主页以及相关页面如下所示：</h4>
          <hr>
          <section>
            <div class="container-fluid">
              <div class="row">
                <div class="left_product_img col-lg-7 col-md-7 col-sm-12 col-xs-12">
                  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                      <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                      <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                      <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                      <li data-target="#carousel-example-generic" data-slide-to="3"></li>
                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                      <div class="item active sec-goods-img-default">
                        <div class="sec-goods-img-">
                          
                        </div>
                        <div class="carousel-caption">
                        </div>
                      </div>
                      <div class="item sec-goods-img-default">
                        <div class="sec-goods-img-">
                          
                        </div>
                        <div class="carousel-caption">
                        </div>
                      </div>
                      <div class="item sec-goods-img-default">
                        <div class="sec-goods-img-">
                          
                        </div>
                        <div class="carousel-caption">
                        </div>
                      </div>
                      <div class="item sec-goods-img-default">
                        <div class="sec-goods-img-">
                          
                        </div>
                        <div class="carousel-caption">
                        </div>
                      </div>
                    </div>

                    <!-- Controls -->
                    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
                </div>
                <div class="right_product_details col-lg-4 col-md-4 col-sm-12 col-xs-12">
                  <div class="">
                    <ul>
                      <li>
                        <span class="right_board_categories">类别：</span>
                        <span class="right_board_categories_sort">{}</span>
                      </li>
                      <li>
                        <span class="right_board_categories">名称：</span>
                        <span class="right_board_categories_name">小米5</span>
                      </li>
                      <li>
                        <span class="right_board_categories">换向：</span>
                        <span class="right_board_categories_target">iPad</span>
                      </li>
                      <li>
                        <span class="right_board_categories">原价(¥)：</span>
                        <span class="right_board_categories_price">2499</span>
                      </li>
                      <li>
                        <span class="right_board_categories">用时：</span>
                        <span class="right_board_categories_usetime">6个月</span>
                      </li>
                      <li>
                        <span class="right_board_categories">联系人：</span>
                        <span class="right_board_categories_people"></span>
                      </li>
                      <li>
                        <span class="right_board_categories">联系电话：</span>
                        <span class="right_board_categories_tel">18516217735</span>
                      </li>
                      <li>
                        <span class="right_board_categories">详细补充：</span> <br>
                        <span class="product_details_addText right_board_categories_name">
                            我这个小米5是去年刚出来的时候买的，当时是2499元，
                            我没有怎么用，几乎是全新的。手机周边也没有明显
                            摔伤的痕迹。所以我想换一个iPad的或者是高于2000块的安卓pad,
                            最好也是跟我手机是一样的使用程度。
                        </span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </section>
          <footer class="copy_right">
              <p>Copyright © 2017.Adou All rights reserved.</p>
          </footer>
        </div>
    </section>

    <script type="text/javascript" src="/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script src="/js/fileinput.js" type="text/javascript"></script>
    <script src="/js/h5upload.js" type="text/javascript"></script>
    <script type="text/javascript" src="/js/custom-styles.js">
      //前端验证先放置
    </script>
    <script type="text/javascript">
      var params = {
            fileInput: $("#fileImage").get(0),
            dragDrop: $("#fileDragArea").get(0),
            upButton: $("#fileSubmit").get(0),
            url: $("#uploadForm").attr("action"),
              filter: function(files) {
                var arrFiles = [];
                  for (var i = 0, file; file = files[i]; i++) {
                  if (file.type.indexOf("image") == 0) {
                    if (file.size >= 512000) {
                      alert('您这张"'+ file.name +'"图片大小过大，应小于500k');  
                    } else {
                      arrFiles.push(file);  
                    }     
                  } else {
                    alert('文件"' + file.name + '"不是图片。');  
                  }
                }
                return arrFiles;
              },
              onSelect: function(files) {
                var html = '', i = 0;
                $("#preview").html('<div class="upload_loading"></div>');
                var funAppendImage = function() {
                  file = files[i];
                  if (file) {
                    var reader = new FileReader()
                    reader.onload = function(e) {
                      html = html + '<div id="uploadList_'+ i +'" class="upload_append_list"><p><strong>' + file.name + '</strong>'+ 
                        '<a href="javascript:" class="upload_delete" title="删除" data-index="'+ i +'">删除</a><br />' +
                        '<img id="uploadImage_' + i + '" src="' + e.target.result + '" class="upload_image" /></p>'+ 
                        '<span id="uploadProgress_' + i + '" class="upload_progress"></span>' +
                      '</div>';
                      
                      i++;
                      funAppendImage();
                    }
                    reader.readAsDataURL(file);
                  } else {
                    $("#preview").html(html);
                    if (html) {
                      //删除方法
                      $(".upload_delete").click(function() {
                        ZXXFILE.funDeleteFile(files[parseInt($(this).attr("data-index"))]);
                        return false; 
                      });
                      //提交按钮显示
                      $("#fileSubmit").show();  
                    } else {
                      //提交按钮隐藏
                      $("#fileSubmit").hide();  
                    }
                  }
                };
                funAppendImage();   
              },
              onDelete: function(file) {
                $("#uploadList_" + file.index).fadeOut();
              },
              onDragOver: function() {
                $(this).addClass("upload_drag_hover");
              },
              onDragLeave: function() {
                $(this).removeClass("upload_drag_hover");
              },
              onProgress: function(file, loaded, total) {
                var eleProgress = $("#uploadProgress_" + file.index), percent = (loaded / total * 100).toFixed(2) + '%';
                eleProgress.show().html(percent);
              },
              onSuccess: function(file, response) {
                $("#uploadInf").append("<p>上传成功，图片地址是：" + response + "</p>");
              },
              onFailure: function(file) {
                $("#uploadInf").append("<p>图片" + file.name + "上传失败！</p>");  
                $("#uploadImage_" + file.index).css("opacity", 0.2);
              },
              onComplete: function() {
                //提交按钮隐藏
                $("#fileSubmit").hide();
                //file控件value置空
                $("#fileImage").val("");
                $("#uploadInf").append("<p>当前图片全部上传完毕，可继续添加上传。</p>");
              }
          };
          ZXXFILE = $.extend(ZXXFILE, params);
          ZXXFILE.init();
    </script>

  </body>
</html>
